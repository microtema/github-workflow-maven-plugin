name: GitHub Workflows Maven-Plugin

on:
  push:
    branches:
      - feature/*
  pull_request:
    branches:
      - feature/*

env:
  DOCKER_REGISTRY: "docker.registry.local"
  JAVA_VERSION: "1.8"
  GIT_STRATEGY: "clone"
  GIT_DEPTH: "10"
  MAVEN_CLI_OPTS: "--batch-mode --errors --fail-at-end --show-version -DinstallAtEnd=true\
    \ -DdeployAtEnd=true"

jobs:
  compile:
    name: Compile
    runs-on: [ ubuntu-latest ]
    needs: [ versioning ]
    steps:
      - name: 'Checkout'
        uses: actions/checkout@v2
      - name: 'Java: Setup'
        uses: actions/setup-java@v1
        with:
          java-version: ${{ env.JAVA_VERSION }}
      - name: 'Maven: Compile'
        run: mvn compile $MAVEN_CLI_OPTS

