system-test:
  name: '%JOB_NAME%'
  runs-on: [ %RUNS_ON% ]
  needs: [ %NEEDS% ]
  if: ${{ always() }}
  env:
    API_KEY: %API_KEY%
    STAGE_NAME: %STAGE_NAME%
  steps:
    - name: 'Checkout'
      uses: actions/checkout@v2
    - name: 'Java: Setup'
      uses: actions/setup-java@v1
      with:
        java-version: ${{ env.JAVA_VERSION }}
    - name: 'Maven: system test'
      run: mvn integration-test -P it -DtestType=%TEST_TYPE% -DsourceType=%SOURCE_TYPE% -DstageName=$STAGE_NAME -DapiKey=$API_KEY $MAVEN_CLI_OPTS
